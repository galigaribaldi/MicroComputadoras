
F:\Info_AIDA08SH_2\Ejemplos\mensaterm_sh32.asm   Ensamblado con ENS08 el 24/08/2016 11:13:45 a. m.

0000               * Programa MENSATERM_SH32
0000               * Ejecutable en RAM del MCU MC9S08SH32
0000               * Despliega repetitivamente en el emulador
0000               * de terminal el mensaje:

0000               * Hola alumnos desde el dispositivo el MCU MC9S08SH32.
0000               * Habilitado como dispositivo CHIPBAS8SH.

0000               * Por: Antonio Salvá Calleja
0000               * Fecha: abril 22,2016

0000               **** Equ's del sci1 *******
0000                scibdh equ $38
0000                scibdl equ $39
0000                scic2  equ $3b
0000                scis1  equ $3c
0000                scid   equ $3f

0000               ********************************



0100                             org $0100

0100               ; Inicializa puerto serie
0100 450082                       ldhx #$0082  ;BR=130 para 
0103 3538                         sthx scibdh  ;9600 bps, @Fbus=20 MHz
0105 6E0C3B                       mov #$0c,scic2  ;habilita tx y rx
0108               ;.........................................
0108                             
0108 AD14           ciclot:        bsr rxsci
010A 450124                        ldhx #textmens
010D F6             otrocar:       lda ,x
010E A104                          cmp #$04 ;Checa por fin de texto
0110 27F6                          beq ciclot
0112 AD04                          bsr txsci
0114 AF01                          aix #$01 ;h:x <-- h:x + 1
0116 20F5                          bra otrocar

0118                              
0118               ***********************************************
0118 0D3CFD         txsci:         brclr 6,scis1,txsci
011B B73F                          sta scid
011D 81                            rts

011E 0B3CFD         rxsci:         brclr 5,scis1,rxsci
0121 B63F                          lda scid
0123 81                            rts

0124 486F6C6120     textmens:      fcc "Hola alumnos desde el MCU MC9S08SH32."
     616C756D6E
     6F73206465
     7364652065
     6C204D4355
     204D433953
     3038534833
     322E
0149 0D                            db $0d
014A 486162696C                    fcc "Habilitado como dispositivo CHIPBAS8SH."
     697461646F
     20636F6D6F
     2064697370
     6F73697469
     766F204348
     4950424153
     3853482E
0171 0D0D04                        db $0d,$0d,$04


   TABLA DE SÍMBOLOS

       ETIQUETAS

CICLOT                   0108
OTROCAR                  010D
TXSCI                    0118
RXSCI                    011E
TEXTMENS                 0124

   ASIGNACIONES    EQU

SCIBDH                  $38
SCIBDL                  $39
SCIC2                   $3B
SCIS1                   $3C
SCID                    $3F

